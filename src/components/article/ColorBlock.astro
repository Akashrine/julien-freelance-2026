---
interface Props {
  bgColor?: string;
  borderColor?: string;
  label?: string;
  title?: string;
}

const { bgColor = '#D7E5E5', borderColor, label, title } = Astro.props;

// Convert hex to rgba with opacity
function hexToRgba(hex: string, opacity: number): string {
  const r = parseInt(hex.slice(1, 3), 16);
  const g = parseInt(hex.slice(3, 5), 16);
  const b = parseInt(hex.slice(5, 7), 16);
  return `rgba(${r}, ${g}, ${b}, ${opacity})`;
}

const bgRgba = hexToRgba(bgColor, 0.1);
---

<div 
  class={`py-16 md:py-24 mb-16 md:mb-24 -mx-8 md:-mx-[25vw] px-8 md:px-[25vw] relative overflow-hidden color-block ${borderColor ? `color-block-bordered` : ''}`}
  style={`--bg-color: ${bgRgba}; ${borderColor ? `--border-color: ${borderColor};` : ''}`}
>
  <div class="max-w-2xl mx-auto">
    {label && <div class="font-mono text-[10px] mb-8 color-block-label" style={`--label-color: ${borderColor || '#6B7280'};`}>{label}</div>}
    {title && <h2 class="text-3xl md:text-4xl mb-10 font-serif italic">{title}</h2>}
    <slot />
  </div>
</div>