---
interface Props {
  currentPage?: string;
}

const { currentPage = 'home' } = Astro.props;
---

<nav class="py-10 max-w-[1150px] mx-auto px-8 flex justify-between items-center relative z-50">
  <a href="/" class="logo-link group flex items-baseline gap-0.5 transition-all duration-300">
    <span class="text-xl font-medium">Julien</span>
    <span class="text-xl font-black tracking-tight">Brionne</span>
    <span class="text-[#C5A070] text-3xl leading-none transition-transform duration-300 group-hover:scale-110 origin-bottom" aria-hidden="true">.</span>
  </a>
  
  <div class="hidden md:flex space-x-10 font-mono text-[10px] font-medium text-gray-600">
    <a href="/approche" class={`nav-link transition-colors ${currentPage === 'approche' ? 'text-black active' : 'hover:text-black'}`}>Mon approche</a>
    <a href="/situations" class={`nav-link transition-colors ${currentPage === 'situations' ? 'text-black active' : 'hover:text-black'}`}>Vos situations</a>
    <a href="/articles" class={`nav-link transition-colors ${currentPage === 'articles' ? 'text-black active decoration-[#E5BAAD]' : 'hover:text-black'}`}>Articles</a>
  </div>

  <!-- Mobile menu button -->
  <button 
    id="mobile-menu-button" 
    class="md:hidden font-mono text-gray-500"
    aria-expanded="false"
    aria-controls="mobile-menu"
    aria-label="Ouvrir le menu de navigation"
  >
    Menu
  </button>

  <!-- Mobile menu -->
  <div id="mobile-menu" class="hidden md:hidden absolute top-full left-0 right-0 mt-4 pb-4 border-t border-gray-200 pt-4 bg-[#FDFCFB]">
    <div class="flex flex-col gap-4 px-8">
      <a href="/approche" class={`font-mono transition-colors ${currentPage === 'approche' ? 'text-black' : 'text-gray-600 hover:text-black'}`}>Mon approche</a>
      <a href="/situations" class={`font-mono transition-colors ${currentPage === 'situations' ? 'text-black underline underline-offset-4' : 'text-gray-600 hover:text-black'}`}>Vos situations</a>
      <a href="/articles" class={`font-mono transition-colors ${currentPage === 'articles' ? 'text-black underline underline-offset-4 decoration-[#E5BAAD]' : 'text-gray-600 hover:text-black'}`}>Articles</a>
    </div>
  </div>
</nav>

<script>
  // Mobile menu toggle
  document.addEventListener('DOMContentLoaded', () => {
    const button = document.getElementById('mobile-menu-button') as HTMLButtonElement;
    const menu = document.getElementById('mobile-menu') as HTMLElement;
    const firstLink = menu?.querySelector('a') as HTMLAnchorElement;
    
    if (button && menu) {
      button.addEventListener('click', () => {
        const isHidden = menu.classList.contains('hidden');
        
        if (isHidden) {
          menu.classList.remove('hidden');
          button.setAttribute('aria-expanded', 'true');
          // Focus sur le premier lien pour amÃ©liorer la navigation clavier
          setTimeout(() => firstLink?.focus(), 100);
        } else {
          menu.classList.add('hidden');
          button.setAttribute('aria-expanded', 'false');
        }
      });

      // Fermeture avec Escape
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && !menu.classList.contains('hidden')) {
          menu.classList.add('hidden');
          button.setAttribute('aria-expanded', 'false');
          button.focus();
        }
      });
    }
  });
</script>
